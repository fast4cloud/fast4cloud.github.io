(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{340:function(t,s,a){"use strict";a.r(s);var e=a(13),r=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"é›ªèŠ±ç®—æ³•ç»„ä»¶"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é›ªèŠ±ç®—æ³•ç»„ä»¶"}},[t._v("#")]),t._v(" é›ªèŠ±ç®—æ³•ç»„ä»¶")]),t._v(" "),s("h2",{attrs:{id:"å¼•å…¥maven-åŒ…"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¼•å…¥maven-åŒ…"}},[t._v("#")]),t._v(" å¼•å…¥maven åŒ…")]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.fast4cloud"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("framework-starter-snowfrake-id"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h2",{attrs:{id:"å½“å‰ä½¿ç”¨ç®—æ³•åŒ…ç‰ˆæœ¬"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å½“å‰ä½¿ç”¨ç®—æ³•åŒ…ç‰ˆæœ¬"}},[t._v("#")]),t._v(" å½“å‰ä½¿ç”¨ç®—æ³•åŒ…ç‰ˆæœ¬")]),t._v(" "),s("div",{staticClass:"language-xml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[t._v("        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--é›ªèŠ±ç®—æ³•åŒ…--\x3e")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.github.yitter"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("yitter-idgenerator"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.0.6"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("h2",{attrs:{id:"åœ¨yml-é…ç½®ä¿¡æ¯å¦‚ä¸‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åœ¨yml-é…ç½®ä¿¡æ¯å¦‚ä¸‹"}},[t._v("#")]),t._v(" åœ¨yml é…ç½®ä¿¡æ¯å¦‚ä¸‹")]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è‡ªå®šä¹‰é…ç½®")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("self")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#é›ªèŠ±ç®—æ³•")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("yitter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# è¡¨ç¤ºä½¿ç”¨ä»€ä¹ˆç®—æ³•ï¼Œé»˜è®¤å€¼ä¸º1ï¼Œè¡¨ç¤ºä½¿ç”¨é›ªèŠ±æ¼‚ç§»ç®—æ³•ï¼Œ2è¡¨ç¤ºä½¿ç”¨ä¼ ç»Ÿé›ªèŠ±ç®—æ³•ã€‚ä½†ä»å»ºè®®ä½ ä½¿ç”¨é›ªèŠ±æ¼‚ç§»ç®—æ³•ï¼ˆMethod=1ï¼Œé»˜è®¤çš„ï¼‰ï¼Œæ¯•ç«Ÿå®ƒå…·æœ‰æ›´å¥½çš„ä¼¸ç¼©åŠ›å’Œæ›´é«˜çš„æ€§èƒ½ã€‚")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åŸºç¡€æ—¶é—´ï¼ˆä¹Ÿç§°ï¼šåŸºç‚¹æ—¶é—´ã€åŸç‚¹æ—¶é—´ã€çºªå…ƒæ—¶é—´ï¼‰ï¼Œé»˜è®¤å€¼ä¸ºï¼š2022-01-01 00:00:00ï¼Œæ˜¯æ¯«ç§’æ—¶é—´æˆ³ï¼ˆæ˜¯æ•´æ•°ï¼Œ.NETæ˜¯DatetTimeç±»å‹ï¼‰ï¼Œä½œç”¨æ˜¯ï¼šç”¨ç”ŸæˆIDæ—¶çš„ç³»ç»Ÿæ—¶é—´ä¸åŸºç¡€æ—¶é—´çš„å·®å€¼ï¼ˆæ¯«ç§’æ•°ï¼‰ä½œä¸ºç”ŸæˆIDçš„æ—¶é—´æˆ³ã€‚åŸºç¡€æ—¶é—´ä¸€èˆ¬æ— éœ€è®¾ç½®ï¼Œå¦‚æœè§‰å¾—é»˜è®¤å€¼å¤ªè€ï¼Œä½ å¯ä»¥é‡æ–°è®¾ç½®ï¼Œä¸è¿‡è¦æ³¨æ„ï¼Œè¿™ä¸ªå€¼ä»¥åæœ€å¥½ä¸å˜ã€‚")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("baseTime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1640966400000")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æœºå™¨ç ï¼Œæœ€é‡è¦å‚æ•°ï¼Œé»˜è®¤å€¼0ï¼Œå¿…é¡» å…¨å±€å”¯ä¸€ï¼ˆæˆ–ç›¸åŒ DataCenterId å†…å”¯ä¸€ï¼‰ï¼Œå¿…é¡» ç¨‹åºè®¾å®šï¼Œç¼ºçœæ¡ä»¶ï¼ˆWorkerIdBitLengthå–é»˜è®¤å€¼ï¼‰æ—¶æœ€å¤§å€¼63ï¼Œç†è®ºæœ€å¤§å€¼ 2^WorkerIdBitLength-1ï¼ˆä¸åŒå®ç°è¯­è¨€å¯èƒ½ä¼šé™å®šåœ¨ 65535 æˆ– 32767ï¼ŒåŸç†åŒ WorkerIdBitLength è§„åˆ™ï¼‰")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("workerId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æœºå™¨ç ä½é•¿ï¼Œå†³å®š WorkerId çš„æœ€å¤§å€¼ï¼Œé»˜è®¤å€¼1ï¼Œå–å€¼èŒƒå›´ [1, 19]ï¼Œå®é™…ä¸Šæœ‰äº›è¯­è¨€é‡‡ç”¨ æ— ç¬¦å· ushort (uint16) ç±»å‹æ¥æ”¶è¯¥å‚æ•°ï¼Œæ‰€ä»¥æœ€å¤§å€¼æ˜¯16ï¼Œå¦‚æœæ˜¯é‡‡ç”¨ æœ‰ç¬¦å· short (int16)ï¼Œåˆ™æœ€å¤§å€¼ä¸º15ã€‚")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("workerIdBitLength")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# åºåˆ—æ•°ä½é•¿ï¼Œé»˜è®¤å€¼6ï¼Œå–å€¼èŒƒå›´ [3, 21]ï¼ˆå»ºè®®ä¸å°äº4ï¼‰ï¼Œå†³å®šæ¯æ¯«ç§’åŸºç¡€ç”Ÿæˆçš„IDä¸ªæ•°ã€‚è§„åˆ™è¦æ±‚ï¼šWorkerIdBitLength + SeqBitLength ä¸è¶…è¿‡ 22ã€‚")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("seqBitLength")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æœ€å°åºåˆ—æ•°ï¼Œé»˜è®¤å€¼5ï¼Œå–å€¼èŒƒå›´ [5, MaxSeqNumber]ï¼Œæ¯æ¯«ç§’çš„å‰5ä¸ªåºåˆ—æ•°å¯¹åº”ç¼–å·0-4æ˜¯ä¿ç•™ä½ï¼Œå…¶ä¸­0æ˜¯æ‰‹å·¥æ’å…¥æ–°å€¼é¢„ç•™ä½ï¼Œ1-4æ˜¯æ—¶é—´å›æ‹¨ç›¸åº”é¢„ç•™ä½ã€‚")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("minSeqNumber")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æœ€å¤§åºåˆ—æ•°ï¼Œè®¾ç½®èŒƒå›´ [MinSeqNumber, 2^SeqBitLength-1]ï¼Œé»˜è®¤å€¼0ï¼ŒçœŸå®æœ€å¤§åºåˆ—æ•°å–æœ€å¤§å€¼ï¼ˆ2^SeqBitLength-1ï¼‰ï¼Œä¸ä¸º0æ—¶ï¼Œå–å…¶ä¸ºçœŸå®æœ€å¤§åºåˆ—æ•°ï¼Œä¸€èˆ¬æ— éœ€è®¾ç½®ï¼Œé™¤éå¤šæœºå…±äº«WorkerIdåˆ†æ®µç”ŸæˆIDï¼ˆæ­¤æ—¶è¿˜è¦æ­£ç¡®è®¾ç½®æœ€å°åºåˆ—æ•°ï¼‰ã€‚")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("maxSeqNumber")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# æœ€å¤§æ¼‚ç§»æ¬¡æ•°ï¼Œä¸è®¡ç®—èƒ½åŠ›æœ‰å…³")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("topOverCostCount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br")])]),s("h2",{attrs:{id:"å®é™…ä½¿ç”¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å®é™…ä½¿ç”¨"}},[t._v("#")]),t._v(" å®é™…ä½¿ç”¨")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// åˆå§‹åŒ–ä»¥åï¼Œå³å¯åœ¨ä»»ä½•éœ€è¦ç”ŸæˆIDçš„åœ°æ–¹ï¼Œè°ƒç”¨ä»¥ä¸‹æ–¹æ³•ï¼š")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" newId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FdSnowFrakeIdUtil")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLongId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" newId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FdSnowFrakeIdUtil")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getStrId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h2",{attrs:{id:"ç›®å½•ç»“æ„"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç›®å½•ç»“æ„"}},[t._v("#")]),t._v(" ç›®å½•ç»“æ„")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("â”‚ â”œâ”€config                   é…ç½®ç›®å½•\nâ”‚ |  â”œâ”€SnowFrakeConfig       åˆå§‹åŒ–é…ç½®\n| |  â””â”€SnowFrakeProperties   è‡ªå®šä¹‰propertiesé…ç½®+\n| â””â”€utils                    å·¥å…·ç±»\n|    â””â”€FdSnowFrakeIdUtil     å®é™…ä½¿ç”¨å·¥å…·ç±»\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[s("em",[s("strong",[t._v("å¼•ç”¨")])])]),t._v(" "),s("h2",{attrs:{id:"æŠ€æœ¯æ”¯æŒ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æŠ€æœ¯æ”¯æŒ"}},[t._v("#")]),t._v(" æŠ€æœ¯æ”¯æŒ")]),t._v(" "),s("p",[t._v("å¼€æºåœ°å€ï¼šhttps://github.com/yitter/IdGenerator")]),t._v(" "),s("p",[t._v("QQç¾¤ï¼š646049993")]),t._v(" "),s("h2",{attrs:{id:"ğŸ’-ç®—æ³•ä»‹ç»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ’-ç®—æ³•ä»‹ç»"}},[t._v("#")]),t._v(" ğŸ’ ç®—æ³•ä»‹ç»")]),t._v(" "),s("p",[t._v("â„ è¿™æ˜¯ä¼˜åŒ–çš„é›ªèŠ±ç®—æ³•ï¼ˆé›ªèŠ±æ¼‚ç§»ï¼‰ï¼Œå®ƒç”Ÿæˆçš„IDæ›´çŸ­ã€é€Ÿåº¦æ›´å¿«ã€‚")]),t._v(" "),s("p",[t._v("â„ æ”¯æŒ k8s ç­‰å®¹å™¨ç¯å¢ƒè‡ªåŠ¨æ‰©å®¹ï¼ˆè‡ªåŠ¨æ³¨å†Œ WorkerIdï¼‰ï¼Œå¯åœ¨å•æœºæˆ–åˆ†å¸ƒå¼ç¯å¢ƒç”Ÿæˆæ•°å­—å‹å”¯ä¸€IDã€‚")]),t._v(" "),s("p",[t._v("â„ åŸç”Ÿæ”¯æŒ C#/Java/Go/Rust/C/SQL/Node.js/PHP(Cæ‰©å±•) ç­‰è¯­è¨€ï¼Œå¹¶æä¾›Pythonã€PBå¤šçº¿ç¨‹å®‰å…¨è°ƒç”¨åŠ¨æ€åº“ï¼ˆFFIï¼‰ã€‚")]),t._v(" "),s("p",[t._v("â„ å…¼å®¹æ‰€æœ‰é›ªèŠ±ç®—æ³•ï¼ˆå·æ®µæ¨¡å¼æˆ–ç»å…¸æ¨¡å¼ï¼Œå¤§å‚æˆ–å°å‚ï¼‰ï¼Œå°†æ¥ä½ å¯åšä»»æ„çš„å‡çº§åˆ‡æ¢ã€‚ï¼ˆä¸€èˆ¬æ— é¡»å‡çº§ï¼Œä½†ç†è®ºä¸Šæ”¯æŒï¼‰")]),t._v(" "),s("p",[t._v("â„ è¿™æ˜¯è®¡ç®—æœºå†å²ä¸Šæœ€å…¨é¢çš„é›ªèŠ±IDç”Ÿæˆå·¥å…·ã€‚")]),t._v(" "),s("h4",{attrs:{id:"éœ€æ±‚æ¥æº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#éœ€æ±‚æ¥æº"}},[t._v("#")]),t._v(" éœ€æ±‚æ¥æº")]),t._v(" "),s("p",[t._v("ğŸ’§ ä½œä¸ºæ¶æ„è®¾è®¡çš„ä½ ï¼Œæƒ³è¦è§£å†³æ•°æ®åº“ä¸»é”®å”¯ä¸€çš„é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå¤šæ•°æ®åº“ä¸­ã€‚")]),t._v(" "),s("p",[t._v("ğŸ’§ ä½ å¸Œæœ›æ•°æ®è¡¨ä¸»é”®ç”¨æœ€å°‘çš„å­˜å‚¨ç©ºé—´ï¼Œç´¢å¼•é€Ÿåº¦æ›´å¿«ï¼ŒSelectã€Insert å’Œ Update æ›´è¿…é€Ÿã€‚")]),t._v(" "),s("p",[t._v("ğŸ’§ ä½ è¦è€ƒè™‘åœ¨åˆ†åº“åˆ†è¡¨ï¼ˆåˆåº“åˆè¡¨ï¼‰æ—¶ï¼Œä¸»é”®å€¼å¯ç›´æ¥ä½¿ç”¨ï¼Œå¹¶èƒ½åæ˜ ä¸šåŠ¡æ—¶åºã€‚")]),t._v(" "),s("p",[t._v("ğŸ’§ å¦‚æœè¿™æ ·çš„ä¸»é”®å€¼å¤ªé•¿ï¼Œè¶…è¿‡å‰ç«¯ js Number ç±»å‹æœ€å¤§å€¼ï¼Œé¡»æŠŠ Long å‹è½¬æ¢ä¸º String å‹ï¼Œä½ ä¼šè§‰å¾—æœ‰ç‚¹æ²®ä¸§ã€‚")]),t._v(" "),s("p",[t._v("ğŸ’§ å°½ç®¡ Guid èƒ½è‡ªå¢ï¼Œä½†å ç”¨ç©ºé—´å¤§ï¼Œç´¢å¼•é€Ÿåº¦æ…¢ï¼Œä½ ä¸æƒ³ç”¨å®ƒã€‚")]),t._v(" "),s("p",[t._v("ğŸ’§ åº”ç”¨å®ä¾‹å¯èƒ½è¶…è¿‡50ä¸ªï¼Œæ¯ä¸ªå¹¶å‘è¯·æ±‚å¯è¾¾10W/sã€‚")]),t._v(" "),s("p",[t._v("ğŸ’§ è¦åœ¨å®¹å™¨ç¯å¢ƒéƒ¨ç½²åº”ç”¨ï¼Œæ”¯æŒæ°´å¹³å¤åˆ¶ã€è‡ªåŠ¨æ‰©å®¹ã€‚")]),t._v(" "),s("p",[t._v("ğŸ’§ ä¸æƒ³ä¾èµ– redis çš„è‡ªå¢æ“ä½œè·å¾—è¿ç»­çš„ä¸»é”®IDï¼Œå› ä¸ºè¿ç»­çš„IDå­˜åœ¨ä¸šåŠ¡æ•°æ®å®‰å…¨é£é™©ã€‚")]),t._v(" "),s("p",[t._v("ğŸ’§ ä½ å¸Œæœ›ç³»ç»Ÿè¿è¡Œ 100 å¹´ä»¥ä¸Šã€‚")]),t._v(" "),s("h4",{attrs:{id:"ä¼ ç»Ÿç®—æ³•é—®é¢˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¼ ç»Ÿç®—æ³•é—®é¢˜"}},[t._v("#")]),t._v(" ä¼ ç»Ÿç®—æ³•é—®é¢˜")]),t._v(" "),s("p",[t._v("âŒ ç”Ÿæˆçš„IDå¤ªé•¿ã€‚")]),t._v(" "),s("p",[t._v("âŒ ç¬æ—¶å¹¶å‘é‡ä¸å¤Ÿã€‚")]),t._v(" "),s("p",[t._v("âŒ ä¸èƒ½è§£å†³æ—¶é—´å›æ‹¨é—®é¢˜ã€‚")]),t._v(" "),s("p",[t._v("âŒ ä¸æ”¯æŒåè¡¥ç”Ÿæˆå‰åºIDã€‚")]),t._v(" "),s("p",[t._v("âŒ å¯èƒ½ä¾èµ–å¤–éƒ¨å­˜å‚¨ç³»ç»Ÿã€‚")]),t._v(" "),s("h4",{attrs:{id:"æ–°ç®—æ³•ç‰¹ç‚¹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ–°ç®—æ³•ç‰¹ç‚¹"}},[t._v("#")]),t._v(" æ–°ç®—æ³•ç‰¹ç‚¹")]),t._v(" "),s("p",[t._v("âœ” æ•´å½¢æ•°å­—ï¼Œéšæ—¶é—´å•è°ƒé€’å¢ï¼ˆä¸ä¸€å®šè¿ç»­ï¼‰ï¼Œé•¿åº¦æ›´çŸ­ï¼Œç”¨50å¹´éƒ½ä¸ä¼šè¶…è¿‡ js Numberç±»å‹æœ€å¤§å€¼ã€‚ï¼ˆé»˜è®¤é…ç½®ï¼‰")]),t._v(" "),s("p",[t._v("âœ” é€Ÿåº¦æ›´å¿«ï¼Œæ˜¯ä¼ ç»Ÿé›ªèŠ±ç®—æ³•çš„2-5å€ï¼Œ0.1ç§’å¯ç”Ÿæˆ50ä¸‡ä¸ªï¼ˆåŸºäº8ä»£ä½å‹i7ï¼‰ã€‚")]),t._v(" "),s("p",[t._v("âœ” æ”¯æŒæ—¶é—´å›æ‹¨å¤„ç†ã€‚æ¯”å¦‚æœåŠ¡å™¨æ—¶é—´å›æ‹¨1ç§’ï¼Œæœ¬ç®—æ³•èƒ½è‡ªåŠ¨é€‚åº”ç”Ÿæˆä¸´ç•Œæ—¶é—´çš„å”¯ä¸€IDã€‚")]),t._v(" "),s("p",[t._v("âœ” æ”¯æŒæ‰‹å·¥æ’å…¥æ–°IDã€‚å½“ä¸šåŠ¡éœ€è¦åœ¨å†å²æ—¶é—´ç”Ÿæˆæ–°IDæ—¶ï¼Œç”¨æœ¬ç®—æ³•çš„é¢„ç•™ä½èƒ½ç”Ÿæˆ5000ä¸ªæ¯ç§’ã€‚")]),t._v(" "),s("p",[t._v("âœ” ä¸ä¾èµ–ä»»ä½•å¤–éƒ¨ç¼“å­˜å’Œæ•°æ®åº“ã€‚ï¼ˆk8sç¯å¢ƒä¸‹è‡ªåŠ¨æ³¨å†Œ WorkerId çš„åŠ¨æ€åº“ä¾èµ– redisï¼‰")]),t._v(" "),s("p",[t._v("âœ” åŸºç¡€åŠŸèƒ½ï¼Œå¼€ç®±å³ç”¨ï¼Œæ— éœ€é…ç½®æ–‡ä»¶ã€æ•°æ®åº“è¿æ¥ç­‰ã€‚")]),t._v(" "),s("h4",{attrs:{id:"æ€§èƒ½æ•°æ®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ€§èƒ½æ•°æ®"}},[t._v("#")]),t._v(" æ€§èƒ½æ•°æ®")]),t._v(" "),s("p",[t._v("(å‚æ•°ï¼š10ä½è‡ªå¢åºåˆ—ï¼Œ1000æ¬¡æ¼‚ç§»æœ€å¤§å€¼)")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("è¿ç»­è¯·æ±‚é‡")]),t._v(" "),s("th",[t._v("5K")]),t._v(" "),s("th",[t._v("5W")]),t._v(" "),s("th",[t._v("50W")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("ä¼ ç»Ÿé›ªèŠ±ç®—æ³•")]),t._v(" "),s("td",[t._v("0.0045s")]),t._v(" "),s("td",[t._v("0.053s")]),t._v(" "),s("td",[t._v("0.556s")])]),t._v(" "),s("tr",[s("td",[t._v("é›ªèŠ±æ¼‚ç§»ç®—æ³•")]),t._v(" "),s("td",[t._v("0.0015s")]),t._v(" "),s("td",[t._v("0.012s")]),t._v(" "),s("td",[t._v("0.113s")])])])]),t._v(" "),s("p",[t._v("ğŸ’ æè‡´æ€§èƒ½ï¼š500W/s~3000W/sã€‚ï¼ˆæ‰€æœ‰æµ‹è¯•æ•°æ®å‡åŸºäº8ä»£ä½å‹i7è®¡ç®—ï¼‰")]),t._v(" "),s("h4",{attrs:{id:"å¦‚ä½•å¤„ç†æ—¶é—´å›æ‹¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•å¤„ç†æ—¶é—´å›æ‹¨"}},[t._v("#")]),t._v(" å¦‚ä½•å¤„ç†æ—¶é—´å›æ‹¨")]),t._v(" "),s("p",[t._v("ğŸ”¶ å½“å‘ç”Ÿç³»ç»Ÿæ—¶é—´å›æ‹¨æ—¶ï¼Œç®—æ³•é‡‡ç”¨è¿‡å»æ—¶åºçš„é¢„ç•™åºæ•°ç”Ÿæˆæ–°çš„IDã€‚")]),t._v(" "),s("p",[t._v("ğŸ”¶ å›æ‹¨ç”Ÿæˆçš„IDåºå·ï¼Œé»˜è®¤é å‰ï¼Œä¹Ÿå¯ä»¥è°ƒæ•´ä¸ºé åã€‚")]),t._v(" "),s("p",[t._v("ğŸ”¶ å…è®¸æ—¶é—´å›æ‹¨è‡³æœ¬ç®—æ³•é¢„è®¾åŸºæ•°ï¼ˆå‚æ•°å¯è°ƒï¼‰ã€‚")]),t._v(" "),s("h2",{attrs:{id:"ğŸ’-idç»„æˆè¯´æ˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ’-idç»„æˆè¯´æ˜"}},[t._v("#")]),t._v(" ğŸ’ IDç»„æˆè¯´æ˜")]),t._v(" "),s("ul",[s("li",[t._v("æœ¬ç®—æ³•ç”Ÿæˆçš„IDç”±3éƒ¨åˆ†ç»„æˆï¼ˆæ²¿ç”¨é›ªèŠ±ç®—æ³•å®šä¹‰ï¼‰ï¼š")]),t._v(" "),s("li",[t._v("+-------------------------+--------------+----------+")]),t._v(" "),s("li",[t._v("| 1.ç›¸å¯¹åŸºç¡€æ—¶é—´çš„æ—¶é—´å·® | 2.WorkerId | 3.åºåˆ—æ•° |")]),t._v(" "),s("li",[t._v("+-------------------------+--------------+----------+")]),t._v(" "),s("li"),t._v(" "),s("li",[t._v("ç¬¬1éƒ¨åˆ†ï¼Œæ—¶é—´å·®ï¼Œæ˜¯ç”ŸæˆIDæ—¶çš„ç³»ç»Ÿæ—¶é—´å‡å» BaseTime çš„æ€»æ—¶é—´å·®ï¼ˆæ¯«ç§’å•ä½ï¼‰ã€‚")]),t._v(" "),s("li",[t._v("ç¬¬2éƒ¨åˆ†ï¼ŒWorkerIdï¼Œæ˜¯åŒºåˆ†ä¸åŒæœºå™¨æˆ–ä¸åŒåº”ç”¨çš„å”¯ä¸€IDï¼Œæœ€å¤§å€¼ç”± WorkerIdBitLengthï¼ˆé»˜è®¤6ï¼‰é™å®šã€‚")]),t._v(" "),s("li",[t._v("ç¬¬3éƒ¨åˆ†ï¼Œåºåˆ—æ•°ï¼Œæ˜¯æ¯æ¯«ç§’ä¸‹çš„åºåˆ—æ•°ï¼Œç”±å‚æ•°ä¸­çš„ SeqBitLengthï¼ˆé»˜è®¤6ï¼‰é™å®šã€‚")])]),t._v(" "),s("h4",{attrs:{id:"idç¤ºä¾‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#idç¤ºä¾‹"}},[t._v("#")]),t._v(" IDç¤ºä¾‹")]),t._v(" "),s("p",[t._v("ğŸŸ£ æœ¬ç®—æ³•ç”Ÿæˆçš„ ID ï¼Œæ˜¯æ•´æ•°ï¼ˆå ç”¨ç©ºé—´æœ€å¤š8å­—èŠ‚ï¼‰ï¼Œä»¥ä¸‹æ˜¯åŸºäºé»˜è®¤é…ç½®ç”Ÿæˆçš„IDï¼š")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("129053495681099        (è¿è¡Œ1å¹´)\n387750301904971        (è¿è¡Œ3å¹´)\n646093214093387        (è¿è¡Œ5å¹´)\n1292658282840139       (è¿è¡Œ10å¹´)\n9007199254740992       (js Number æœ€å¤§å€¼ï¼Œå¯ä»¥æ”¯æ’‘70å¹´)\n165399880288699493     (æ™®é€šé›ªèŠ±ç®—æ³•ç”Ÿæˆçš„ID)\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[t._v("ğŸŸ£ æœ¬ç®—æ³•ç”Ÿæˆçš„ ID å€¼ï¼Œæ˜¯ js Number æœ€å¤§å€¼çš„ 1%-10%ï¼Œæ˜¯æ™®é€šé›ªèŠ±ç®—æ³•å€¼çš„åƒåˆ†ä¹‹ä¸€ï¼Œè€Œç”Ÿæˆé€Ÿåº¦å´è¶…è¿‡æ™®é€šé›ªèŠ±ç®—æ³•ã€‚")]),t._v(" "),s("p",[t._v("ğŸŸ£ js Number ç±»å‹æœ€å¤§æ•°å€¼ï¼š9007199254740992ï¼Œæœ¬ç®—æ³•åœ¨ä¿æŒå¹¶å‘æ€§èƒ½ï¼ˆ5W+/0.01sï¼‰å’Œæœ€å¤§64ä¸ª WorkerIdï¼ˆ6bitï¼‰çš„åŒæ—¶ï¼Œèƒ½ç”¨70å¹´æ‰åˆ° js Number Max å€¼ã€‚")]),t._v(" "),s("h3",{attrs:{id:"é•¿åº¦ä¼°ç®—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é•¿åº¦ä¼°ç®—"}},[t._v("#")]),t._v(" é•¿åº¦ä¼°ç®—")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("ğŸ’ æ¯å¢åŠ  1ä½ WorkerIdBitLength æˆ– SeqBitLengthï¼Œç”Ÿæˆçš„IDæ•°å­—å€¼å°†ä¼šä¹˜ä»¥2ï¼ˆåŸºç¡€é•¿åº¦å¯å‚è€ƒå‰ä¸€èŠ‚â€œIDç¤ºä¾‹â€ï¼‰ï¼Œåä¹‹åˆ™é™¤ä»¥2ã€‚\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"èƒ½ç”¨å¤šä¹…"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#èƒ½ç”¨å¤šä¹…"}},[t._v("#")]),t._v(" èƒ½ç”¨å¤šä¹…")]),t._v(" "),s("p",[t._v("èƒ½ç”¨å¤šä¹…çš„è§£é‡Šï¼Œæ˜¯æŒ‡ç”Ÿæˆçš„IDæ•°å­—ï¼Œä½•æ—¶èƒ½å¢é•¿åˆ°è¶…è¿‡ longï¼ˆæœ‰ç¬¦å·64ä½ï¼Œ8å­—èŠ‚ï¼‰æœ€å¤§å€¼ã€‚")]),t._v(" "),s("p",[t._v("ğŸ”µ åœ¨é»˜è®¤é…ç½®ä¸‹ï¼ŒIDå¯ç”¨ 71000 å¹´ä¸é‡å¤ã€‚")]),t._v(" "),s("p",[t._v("ğŸ”µ åœ¨æ”¯æŒ 1024 ä¸ªå·¥ä½œèŠ‚ç‚¹æ—¶ï¼ŒIDå¯ç”¨ 4480 å¹´ä¸é‡å¤ã€‚")]),t._v(" "),s("p",[t._v("ğŸ”µ åœ¨æ”¯æŒ 4096 ä¸ªå·¥ä½œèŠ‚ç‚¹æ—¶ï¼ŒIDå¯ç”¨ 1120 å¹´ä¸é‡å¤ã€‚")]),t._v(" "),s("h3",{attrs:{id:"è¡¥å……è¯´æ˜"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è¡¥å……è¯´æ˜"}},[t._v("#")]),t._v(" è¡¥å……è¯´æ˜")]),t._v(" "),s("p",[t._v("â„ é»˜è®¤ç®—æ³•ï¼Œæ¯ä¸ªæ—¶é—´æˆ³å¼€å§‹ï¼Œç”Ÿæˆçš„IDæ˜¯å¥‡æ•°ã€‚")]),t._v(" "),s("p",[t._v("â„ å¯ä»¥æŠŠIDå³ç§» WorkerIdBitLength+SeqBitLengthï¼Œå¾—åˆ°æ—¶é—´æˆ³ã€‚")]),t._v(" "),s("h2",{attrs:{id:"ğŸ’-å‚æ•°è®¾ç½®"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ’-å‚æ•°è®¾ç½®"}},[t._v("#")]),t._v(" ğŸ’ å‚æ•°è®¾ç½®")]),t._v(" "),s("p",[t._v("â„ "),s("em",[s("strong",[t._v("WorkerIdBitLength")])]),t._v("ï¼Œæœºå™¨ç ä½é•¿ï¼Œå†³å®š WorkerId çš„æœ€å¤§å€¼ï¼Œ"),s("strong",[t._v("é»˜è®¤å€¼6")]),t._v("ï¼Œå–å€¼èŒƒå›´ [1, 19]ï¼Œå®é™…ä¸Šæœ‰äº›è¯­è¨€é‡‡ç”¨ æ— ç¬¦å· ushort (uint16)\nç±»å‹æ¥æ”¶è¯¥å‚æ•°ï¼Œæ‰€ä»¥æœ€å¤§å€¼æ˜¯16ï¼Œå¦‚æœæ˜¯é‡‡ç”¨ æœ‰ç¬¦å· short (int16)ï¼Œåˆ™æœ€å¤§å€¼ä¸º15ã€‚")]),t._v(" "),s("p",[t._v("â„ "),s("strong",[t._v("WorkerId")]),t._v("ï¼Œæœºå™¨ç ï¼Œ"),s("strong",[t._v("æœ€é‡è¦å‚æ•°")]),t._v("ï¼Œæ— é»˜è®¤å€¼ï¼Œå¿…é¡» "),s("strong",[t._v("å…¨å±€å”¯ä¸€")]),t._v("ï¼ˆæˆ–ç›¸åŒ DataCenterId å†…å”¯ä¸€ï¼‰ï¼Œå¿…é¡» "),s("strong",[t._v("ç¨‹åºè®¾å®š")]),t._v("ï¼Œç¼ºçœæ¡ä»¶ï¼ˆWorkerIdBitLengthå–é»˜è®¤å€¼ï¼‰æ—¶æœ€å¤§å€¼63ï¼Œç†è®ºæœ€å¤§å€¼\n2^WorkerIdBitLength-1ï¼ˆä¸åŒå®ç°è¯­è¨€å¯èƒ½ä¼šé™å®šåœ¨ 65535 æˆ– 32767ï¼ŒåŸç†åŒ WorkerIdBitLength è§„åˆ™ï¼‰ã€‚ä¸åŒæœºå™¨æˆ–ä¸åŒåº”ç”¨å®ä¾‹ "),s("strong",[t._v("ä¸èƒ½ç›¸åŒ")]),t._v("\nï¼Œä½ å¯é€šè¿‡åº”ç”¨ç¨‹åºé…ç½®è¯¥å€¼ï¼Œä¹Ÿå¯é€šè¿‡è°ƒç”¨å¤–éƒ¨æœåŠ¡è·å–å€¼ã€‚é’ˆå¯¹è‡ªåŠ¨æ³¨å†ŒWorkerIdéœ€æ±‚ï¼Œæœ¬ç®—æ³•æä¾›é»˜è®¤å®ç°ï¼šé€šè¿‡ redis è‡ªåŠ¨æ³¨å†Œ WorkerId çš„åŠ¨æ€åº“ï¼Œè¯¦è§â€œTools\\AutoRegisterWorkerIdâ€ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("ç‰¹åˆ«æç¤º")]),t._v("ï¼šå¦‚æœä¸€å°æœåŠ¡å™¨éƒ¨ç½²å¤šä¸ªç‹¬ç«‹æœåŠ¡ï¼Œéœ€è¦ä¸ºæ¯ä¸ªæœåŠ¡æŒ‡å®šä¸åŒçš„ WorkerIdã€‚")]),t._v(" "),s("p",[t._v("â„ "),s("em",[s("strong",[t._v("SeqBitLength")])]),t._v("ï¼Œåºåˆ—æ•°ä½é•¿ï¼Œ"),s("strong",[t._v("é»˜è®¤å€¼6")]),t._v("ï¼Œå–å€¼èŒƒå›´ [3, 21]ï¼ˆå»ºè®®ä¸å°äº4ï¼‰ï¼Œå†³å®šæ¯æ¯«ç§’åŸºç¡€ç”Ÿæˆçš„IDä¸ªæ•°ã€‚è§„åˆ™è¦æ±‚ï¼šWorkerIdBitLength + SeqBitLength ä¸è¶…è¿‡ 22ã€‚")]),t._v(" "),s("p",[t._v("â„ "),s("em",[s("strong",[t._v("MinSeqNumber")])]),t._v("ï¼Œæœ€å°åºåˆ—æ•°ï¼Œé»˜è®¤å€¼5ï¼Œå–å€¼èŒƒå›´ [5, MaxSeqNumber]ï¼Œæ¯æ¯«ç§’çš„å‰5ä¸ªåºåˆ—æ•°å¯¹åº”ç¼–å·0-4æ˜¯ä¿ç•™ä½ï¼Œå…¶ä¸­1-4æ˜¯æ—¶é—´å›æ‹¨ç›¸åº”é¢„ç•™ä½ï¼Œ0æ˜¯æ‰‹å·¥æ–°å€¼é¢„ç•™ä½ã€‚")]),t._v(" "),s("p",[t._v("â„ "),s("em",[s("strong",[t._v("MaxSeqNumber")])]),t._v("ï¼Œæœ€å¤§åºåˆ—æ•°ï¼Œè®¾ç½®èŒƒå›´ [MinSeqNumber, 2^SeqBitLength-1]\nï¼Œé»˜è®¤å€¼0ï¼ŒçœŸå®æœ€å¤§åºåˆ—æ•°å–æœ€å¤§å€¼ï¼ˆ2^SeqBitLength-1ï¼‰ï¼Œä¸ä¸º0æ—¶ï¼Œå–å…¶ä¸ºçœŸå®æœ€å¤§åºåˆ—æ•°ï¼Œä¸€èˆ¬æ— éœ€è®¾ç½®ï¼Œé™¤éå¤šæœºå…±äº«WorkerIdåˆ†æ®µç”ŸæˆIDï¼ˆæ­¤æ—¶è¿˜è¦æ­£ç¡®è®¾ç½®æœ€å°åºåˆ—æ•°ï¼‰ã€‚")]),t._v(" "),s("p",[t._v("â„ "),s("em",[s("strong",[t._v("BaseTime")])]),t._v("\nï¼ŒåŸºç¡€æ—¶é—´ï¼ˆä¹Ÿç§°ï¼šåŸºç‚¹æ—¶é—´ã€åŸç‚¹æ—¶é—´ã€çºªå…ƒæ—¶é—´ï¼‰ï¼Œæœ‰é»˜è®¤å€¼ï¼ˆ2020å¹´ï¼‰ï¼Œæ˜¯æ¯«ç§’æ—¶é—´æˆ³ï¼ˆæ˜¯æ•´æ•°ï¼Œ.NETæ˜¯DatetTimeç±»å‹ï¼‰ï¼Œä½œç”¨æ˜¯ï¼šç”¨ç”ŸæˆIDæ—¶çš„ç³»ç»Ÿæ—¶é—´ä¸åŸºç¡€æ—¶é—´çš„å·®å€¼ï¼ˆæ¯«ç§’æ•°ï¼‰ä½œä¸ºç”ŸæˆIDçš„æ—¶é—´æˆ³ã€‚åŸºç¡€æ—¶é—´ä¸€èˆ¬æ— éœ€è®¾ç½®ï¼Œå¦‚æœè§‰å¾—é»˜è®¤å€¼å¤ªè€ï¼Œä½ å¯ä»¥é‡æ–°è®¾ç½®ï¼Œä¸è¿‡è¦æ³¨æ„ï¼Œè¿™ä¸ªå€¼ä»¥åæœ€å¥½ä¸å˜ã€‚")]),t._v(" "),s("p",[t._v("ç¬¬äºŒç‰ˆå¢åŠ å‚æ•°ï¼ˆéå¿…é¡»ï¼‰ï¼š")]),t._v(" "),s("p",[t._v("â„ "),s("em",[s("strong",[t._v("DataCenterId")])]),t._v("ï¼Œæ•°æ®ä¸­å¿ƒIDï¼ˆæœºæˆ¿IDï¼Œé»˜è®¤0ï¼‰ï¼Œè¯·ç¡®ä¿å…¨å±€å”¯ä¸€ã€‚")]),t._v(" "),s("p",[t._v("â„ "),s("em",[s("strong",[t._v("DataCenterIdBitLength")])]),t._v("ï¼Œæ•°æ®ä¸­å¿ƒIDé•¿åº¦ï¼ˆé»˜è®¤0ï¼‰ã€‚")]),t._v(" "),s("p",[t._v("â„ "),s("em",[s("strong",[t._v("TimestampType")])]),t._v("ï¼Œæ—¶é—´æˆ³ç±»å‹ï¼ˆ0-æ¯«ç§’ï¼Œ1-ç§’ï¼‰ï¼Œé»˜è®¤0ã€‚")]),t._v(" "),s("h4",{attrs:{id:"å¸¸è§„é›†æˆ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸è§„é›†æˆ"}},[t._v("#")]),t._v(" å¸¸è§„é›†æˆ")]),t._v(" "),s("p",[t._v("1ï¸âƒ£ ç”¨å•ä¾‹æ¨¡å¼è°ƒç”¨ã€‚å¤–éƒ¨é›†æˆæ–¹ä½¿ç”¨æ›´å¤šçš„å®ä¾‹å¹¶è¡Œè°ƒç”¨æœ¬ç®—æ³•ï¼Œä¸ä¼šå¢åŠ IDäº§å‡ºæ•ˆèƒ½ï¼Œå› ä¸ºæœ¬ç®—æ³•é‡‡ç”¨å•çº¿ç¨‹ç”ŸæˆIDã€‚")]),t._v(" "),s("p",[t._v("2ï¸âƒ£ æŒ‡å®šå”¯ä¸€çš„ WorkerIdã€‚å¿…é¡»ç”±å¤–éƒ¨ç³»ç»Ÿç¡®ä¿ WorkerId çš„å…¨å±€å”¯ä¸€æ€§ï¼Œå¹¶èµ‹å€¼ç»™æœ¬ç®—æ³•å…¥å£æ–¹æ³•ã€‚")]),t._v(" "),s("p",[t._v("3ï¸âƒ£ å•æœºå¤šå®ä¾‹éƒ¨ç½²æ—¶ä½¿ç”¨ä¸åŒ WorkerIdã€‚å¹¶éæ‰€æœ‰å®ç°éƒ½æ”¯æŒè·¨è¿›ç¨‹çš„å¹¶å‘å”¯ä¸€ï¼Œä¿é™©èµ·è§ï¼Œåœ¨åŒä¸€ä¸»æœºä¸Šéƒ¨ç½²å¤šåº”ç”¨å®ä¾‹æ—¶ï¼Œè¯·ç¡®ä¿å„ WorkerId å”¯ä¸€ã€‚")]),t._v(" "),s("p",[t._v("4ï¸âƒ£ å¼‚å¸¸å¤„ç†ã€‚ç®—æ³•ä¼šæŠ›å‡ºæ‰€æœ‰ Exceptionï¼Œå¤–éƒ¨ç³»ç»Ÿåº” catch å¼‚å¸¸å¹¶åšå¥½åº”å¯¹å¤„ç†ï¼Œä»¥å…å¼•å‘æ›´å¤§çš„ç³»ç»Ÿå´©æºƒã€‚")]),t._v(" "),s("p",[t._v("5ï¸âƒ£ è®¤çœŸç†è§£ IdGeneratorOptions çš„å®šä¹‰ï¼Œè¿™å¯¹é›†æˆå’Œä½¿ç”¨æœ¬ç®—æ³•æœ‰å¸®åŠ©ã€‚")]),t._v(" "),s("p",[t._v("6ï¸âƒ£ ä½¿ç”¨é›ªèŠ±æ¼‚ç§»ç®—æ³•ã€‚è™½ç„¶ä»£ç é‡ŒåŒ…å«äº†ä¼ ç»Ÿé›ªèŠ±ç®—æ³•çš„å®šä¹‰ï¼Œå¹¶ä¸”ä½ å¯ä»¥åœ¨å…¥å£å¤„æŒ‡å®šï¼ˆMethod=2ï¼‰æ¥å¯ç”¨ä¼ ç»Ÿç®—æ³•ï¼Œä½†ä»å»ºè®®ä½ ä½¿ç”¨é›ªèŠ±æ¼‚ç§»ç®—æ³•ï¼ˆMethod=1ï¼Œé»˜è®¤çš„ï¼‰ï¼Œæ¯•ç«Ÿå®ƒå…·æœ‰æ›´å¥½çš„ä¼¸ç¼©åŠ›å’Œæ›´é«˜çš„æ€§èƒ½ã€‚")]),t._v(" "),s("p",[t._v("7ï¸âƒ£ ä¸è¦ä¿®æ”¹æ ¸å¿ƒç®—æ³•ã€‚æœ¬ç®—æ³•å†…éƒ¨å‚æ•°è¾ƒå¤šï¼Œé€»è¾‘è¾ƒä¸ºå¤æ‚ï¼Œåœ¨ä½ å°šæœªæŒæ¡æ ¸å¿ƒé€»è¾‘æ—¶ï¼Œè¯·å‹¿ä¿®æ”¹æ ¸å¿ƒä»£ç ä¸”ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œé™¤éé€šè¿‡å¤§é‡ç»†è‡´ã€ç§‘å­¦çš„æµ‹è¯•éªŒè¯ã€‚")]),t._v(" "),s("p",[t._v("8ï¸âƒ£ åº”ç”¨åŸŸå†…é…ç½®ç­–ç•¥ç›¸åŒã€‚å½“ç³»ç»Ÿè¿è¡Œä¸€æ®µæ—¶é—´åï¼Œé¡¹ç›®éœ€è¦ä»ç¨‹åºæŒ‡å®š WorkerId è½¬åˆ°è‡ªåŠ¨æ³¨å†Œ WorkerId æ—¶ï¼Œè¯·ç¡®ä¿åŒä¸€åº”ç”¨åŸŸå†…æ‰€æœ‰åœ¨ç”¨å®ä¾‹é‡‡ç”¨ä¸€è‡´çš„é…ç½®ç­–ç•¥ï¼Œè¿™ä¸ä»…ä»…é’ˆå¯¹ WorkerIdï¼Œä¹ŸåŒ…å«å…¶ä»–æ‰€æœ‰é…ç½®å‚æ•°ã€‚")]),t._v(" "),s("p",[t._v("9ï¸âƒ£ ç®¡ç†å¥½æœåŠ¡å™¨æ—¶é—´ã€‚é›ªèŠ±ç®—æ³•ä¾èµ–ç³»ç»Ÿæ—¶é—´ï¼Œä¸è¦æ‰‹å·¥å¤§å¹…åº¦å›è°ƒæ“ä½œç³»ç»Ÿæ—¶é—´ã€‚å¦‚æœä¸€å®šè¦è°ƒæ•´ï¼Œåˆ‡è®°ï¼šç¡®ä¿æœåŠ¡å†æ¬¡å¯åŠ¨æ—¶çš„ç³»ç»Ÿæ—¶é—´å¤§äºæœ€åä¸€æ¬¡å…³é—­æ—¶çš„æ—¶é—´ã€‚ï¼ˆæ³¨ï¼šä¸–ç•Œçº§æˆ–ç½‘ç»œçº§çš„æ—¶é—´åŒæ­¥æˆ–å›æ‹¨ï¼Œå¼•èµ·çš„ç³»ç»Ÿæ—¶é—´å°å¹…åº¦å˜åŒ–ï¼Œå¯¹æœ¬ç®—æ³•æ²¡å½±å“ï¼‰")]),t._v(" "),s("h4",{attrs:{id:"é…ç½®å˜æ›´"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é…ç½®å˜æ›´"}},[t._v("#")]),t._v(" é…ç½®å˜æ›´")]),t._v(" "),s("p",[t._v("é…ç½®å˜æ›´æŒ‡æ˜¯ç³»ç»Ÿè¿è¡Œä¸€æ®µæ—¶é—´åï¼Œå†è°ƒæ•´è¿è¡Œå‚æ•°ï¼ˆIdGeneratorOptions é€‰é¡¹å€¼ï¼‰ï¼Œè¯·æ³¨æ„ï¼š")]),t._v(" "),s("p",[t._v("ğŸ”´ 1.æœ€é‡è¦çš„ä¸€æ¡åŸåˆ™æ˜¯ï¼šBaseTime "),s("strong",[t._v("åªèƒ½å¾€å‰")]),t._v("ï¼ˆæ¯”è€å€¼æ›´å°ã€è·ç¦»ç°åœ¨æ›´è¿œï¼‰èµ‹å€¼ï¼ŒåŸå› æ˜¯å¾€åèµ‹å€¼æå¤§å¯èƒ½äº§ç”Ÿç›¸åŒçš„æ—¶é—´æˆ³ã€‚["),s("strong",[t._v("ä¸æ¨è")]),t._v("åœ¨ç³»ç»Ÿè¿è¡Œä¹‹åè°ƒæ•´ BaseTime]")]),t._v(" "),s("p",[t._v("ğŸ”´ 2.ä»»ä½•æ—¶å€™å¢åŠ  WorkerIdBitLength æˆ– SeqBitLengthï¼Œéƒ½æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æ…ç”¨ â€œå‡å°â€çš„æ“ä½œï¼Œå› ä¸ºè¿™å¯èƒ½å¯¼è‡´åœ¨æœªæ¥æŸå¤©ç”Ÿæˆçš„ ID ä¸è¿‡å»è€é…ç½®æ—¶ç›¸åŒã€‚[å…è®¸åœ¨ç³»ç»Ÿè¿è¡Œä¹‹å**\nå¢åŠ **ä»»ä½•ä¸€ä¸ª BitLength å€¼]")]),t._v(" "),s("p",[t._v("ğŸ”´ 3.å¦‚æœå¿…é¡»å‡å° WorkerIdBitLength æˆ– SeqBitLength å…¶ä¸­çš„ä¸€é¡¹ï¼Œä¸€å®šè¦æ»¡è¶³ä¸€ä¸ªæ¡ä»¶ï¼šæ–°çš„ä¸¤ä¸ª BitLength ä¹‹å’Œè¦å¤§äº è€çš„å€¼ä¹‹å’Œã€‚["),s("strong",[t._v("ä¸æ¨è")]),t._v("åœ¨è¿è¡Œä¹‹åç¼©å°ä»»ä½•ä¸€ä¸ª BitLength å€¼]")]),t._v(" "),s("p",[t._v("ğŸ”´ 4.ä¸Šè¿°3æ¡è§„åˆ™ï¼Œå¹¶æœªåœ¨æœ¬ç®—æ³•å†…åšé€»è¾‘æ§åˆ¶ï¼Œé›†æˆæ–¹åº”æ ¹æ®ä¸Šè¿°è§„åˆ™åšå¥½å½±å“è¯„ä¼°ï¼Œç¡®è®¤æ— è¯¯åï¼Œå†å®æ–½é…ç½®å˜æ›´ã€‚")]),t._v(" "),s("h2",{attrs:{id:"è‡ªåŠ¨æ³¨å†Œworkerid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è‡ªåŠ¨æ³¨å†Œworkerid"}},[t._v("#")]),t._v(" è‡ªåŠ¨æ³¨å†ŒWorkerId")]),t._v(" "),s("p",[t._v("ğŸ” å”¯ä¸€IDç”Ÿæˆå™¨ï¼Œä¾èµ–WorkerIdï¼Œå½“ä¸šåŠ¡æœåŠ¡éœ€è¦æ°´å¹³æ— å·®åˆ«å¤åˆ¶ï¼ˆè‡ªåŠ¨æ‰©å®¹ï¼‰æ—¶ï¼Œè¿™å°±è¦æ±‚èƒ½è‡ªåŠ¨æ³¨å†Œå…¨å±€å”¯ä¸€WorkerIdï¼Œç„¶åæ‰èƒ½ç”Ÿäº§å”¯ä¸€IDã€‚")]),t._v(" "),s("p",[t._v("ğŸ” æœ¬ç®—æ³•æä¾›å¼€æºåŠ¨æ€åº“ï¼ˆgoè¯­è¨€å®ç°ï¼‰ï¼Œèƒ½åœ¨å®¹å™¨ k8s ç­‰å®¹å™¨ç¯å¢ƒä¸‹ï¼Œé€šè¿‡ redis è‡ªåŠ¨æ³¨å†Œ WorkerIdã€‚")]),t._v(" "),s("p",[t._v("ğŸ” é€šè¿‡redisæ³¨å†ŒWorkerIdï¼Œå¹¶éå”¯ä¸€æ–¹æ³•ã€‚ä½ è¿˜å¯ä»¥å¼€å‘ä¸­å¿ƒåŒ–çš„é…ç½®æœåŠ¡ï¼Œå„ç«¯ç‚¹æœåŠ¡å¯åŠ¨æ—¶ï¼Œé€šè¿‡ä¸­å¿ƒæœåŠ¡è·å–å”¯ä¸€ WorkerIdã€‚")]),t._v(" "),s("p",[t._v("ğŸ” å½“ç„¶ï¼Œå¦‚æœä½ çš„æœåŠ¡æ— éœ€è‡ªåŠ¨æ‰©å®¹ï¼Œé‚£å°±ä¸å¿…è‡ªåŠ¨æ³¨å†ŒWorkerIdï¼Œè€Œæ˜¯ä¸ºå®ƒä»¬åˆ†åˆ«è®¾ç½®å…¨å±€å”¯ä¸€å€¼ã€‚")]),t._v(" "),s("p",[t._v("ğŸ” æ–¹æ³•è¿˜æœ‰å¾ˆå¤šï¼Œä¾‹å¦‚ï¼šå¼€å‘ä¸­å¿ƒåŒ–çš„IDç”ŸæˆæœåŠ¡ï¼Œç”±å®ƒä¸ºå„ç«¯ç‚¹æœåŠ¡ï¼ˆå•ä¸ªæˆ–æ‰¹é‡ï¼‰ç”Ÿæˆå¯ç”¨IDã€‚")]),t._v(" "),s("h4",{attrs:{id:"è‡ªåŠ¨æ³¨å†Œæµç¨‹å›¾"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è‡ªåŠ¨æ³¨å†Œæµç¨‹å›¾"}},[t._v("#")]),t._v(" è‡ªåŠ¨æ³¨å†Œæµç¨‹å›¾")]),t._v(" "),s("p",[t._v("å›¾ç‰‡é“¾æ¥ï¼šhttps://github.com/yitter/IdGenerator/blob/master/Tools/AutoRegisterWorkerId/regprocess.jpg")]),t._v(" "),s("p",[t._v("æºç è·¯å¾„ï¼š/Go/source/regworkerid/reghelper.go")]),t._v(" "),s("h4",{attrs:{id:"åŠ¨æ€åº“ä¸‹è½½"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŠ¨æ€åº“ä¸‹è½½"}},[t._v("#")]),t._v(" åŠ¨æ€åº“ä¸‹è½½")]),t._v(" "),s("p",[t._v("ä¸‹è½½é“¾æ¥1ï¼šhttps://github.com/yitter/IdGenerator/releases/download/reg_v1.0/regworkerid_lib_v1.0.zip")]),t._v(" "),s("p",[t._v("ä¸‹è½½é“¾æ¥2ï¼šhttps://gitee.com/yitter/idgenerator/attach_files/662372/download/regworkerid_lib_v1.0.zip")]),t._v(" "),s("h4",{attrs:{id:"åŠ¨æ€åº“æ¥å£å®šä¹‰"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŠ¨æ€åº“æ¥å£å®šä¹‰"}},[t._v("#")]),t._v(" åŠ¨æ€åº“æ¥å£å®šä¹‰")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// æ³¨å†Œä¸€ä¸ª WorkerIdï¼Œä¼šå…ˆæ³¨é”€æ‰€æœ‰æœ¬æœºå·²æ³¨å†Œçš„è®°å½•\n// ip: redis æœåŠ¡å™¨åœ°å€\n// port: redis ç«¯å£\n// password: redis è®¿é—®å¯†ç ï¼Œå¯ä¸ºç©ºå­—ç¬¦ä¸²â€œâ€\n// maxWorkerId: æœ€å¤§ WorkerId\nextern GoInt32 RegisterOne(char* ip, GoInt32 port, char* password, GoInt32 maxWorkerId);\n\n// æ³¨é”€æœ¬æœºå·²æ³¨å†Œçš„ WorkerId\nextern void UnRegister();\n\n// æ£€æŸ¥æœ¬åœ°WorkerIdæ˜¯å¦æœ‰æ•ˆï¼ˆ0-æœ‰æ•ˆï¼Œå…¶å®ƒ-æ— æ•ˆï¼‰\nextern GoInt32 Validate(GoInt32 workerId);\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);